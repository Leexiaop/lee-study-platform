{"version":3,"sources":["assets/api/url.js","assets/api/request.js","assets/api/api.js","recoil/atom/userInfo.js","pages/login/index.js"],"names":["login","upload","modules","question","questionOnline","answer","answerOnline","axios","defaults","baseURL","interceptors","request","use","config","headers","token","window","localStorage","getItem","response","data","code","message","warning","msg","clear","location","href","error","Promise","reject","api","resolve","then","res","responseType","Error","catch","API","url","params","options","method","file","formFields","FormData","append","it","name","value","errorData","filename","matcher","decodeURIComponent","match","extendType","type","reader","FileReader","onload","JSON","parse","result","e","console","log","readAsText","downloadUrl","URL","createObjectURL","Blob","link","document","createElement","setAttribute","body","appendChild","click","_raw","userInfoState","atom","key","default","username","Login","history","useHistory","setUserInfoState","useSetRecoilState","onFinish","a","post","password","success","setItem","push","className","labelCol","span","wrapperCol","initialValues","remember","autoComplete","Item","label","rules","required","Password","offset","htmlType"],"mappings":"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","file":"static/js/12.e855106f.chunk.js","sourcesContent":["export default {\n\t// 登录及用户信息相关\n\tlogin: '/login',\n\tupload: '/upload',\n\tmodules: '/modules',\n\tquestion: '/question',\n\tquestionOnline: '/question/online',\n\tanswer: '/answer',\n\tanswerOnline: '/answer/online'\n};\n","import { message } from 'antd';\nimport axios from 'axios';\nimport _ from 'lodash';\n\naxios.defaults.baseURL = process.env.NODE_ENV === 'development' ? '' : '/api';\n\naxios.interceptors.request.use((config) => {\n\tconfig.headers.token = window.localStorage.getItem('token');\n\treturn config;\n});\n\naxios.interceptors.response.use((response) => {\n\tif (response.data.code === 10001) {\n\t\tmessage.warning(response.data.msg, 5);\n\t\twindow.localStorage.clear();\n\t\twindow.location.href = '/';\n\t\treturn false;\n\t}\n\treturn response;\n}, (error) => {\n\tmessage.warning('哎呀，出错了～～', 5);\n\tPromise.reject(error);\n});\n\nexport const api = (config) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxios(config).then((res) => {\n\t\t\tif (res) {\n\t\t\t\tif (config.responseType === 'blob') {\n\t\t\t\t\tresolve(res);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(res.data);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treject(new Error());\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\treject(error);\n\t\t});\n\t});\n};\n","import { message } from 'antd';\nimport { api } from './request';\n\n/**\n * $api 具体实现方法\n * */\nclass API {\n\tstatic get(url, params, options = {}) {\n\t\treturn api({\n\t\t\turl,\n\t\t\tmethod: 'get',\n\t\t\tparams,\n\t\t\t...options\n\t\t});\n\t}\n\n\tstatic post(url, data, options = {}) {\n\t\treturn api({\n\t\t\turl,\n\t\t\tmethod: 'post',\n\t\t\tdata,\n\t\t\t...options\n\t\t});\n\t}\n\n\tstatic put(url, data, options = {}) {\n\t\treturn api({\n\t\t\turl,\n\t\t\tmethod: 'put',\n\t\t\tdata,\n\t\t\t...options\n\t\t});\n\t}\n\n\tstatic delete(url, data, options = {}) {\n\t\treturn api({\n\t\t\turl,\n\t\t\tmethod: 'delete',\n\t\t\tdata,\n\t\t\t...options\n\t\t});\n\t}\n\n\t// formFields [{name,value}]\n\tstatic upload(url, file, formFields = [], options) {\n\t\tconst data = new FormData();\n\n\t\t// formFields = [{name: 'file', value: FileO}] // 兼容\n\t\tif (file) {\n\t\t\tdata.append('file', file);\n\t\t}\n\n\t\tfor (const it of formFields) {\n\t\t\tdata.append(it.name, it.value);\n\t\t}\n\n\t\treturn api({\n\t\t\turl,\n\t\t\tmethod: 'post',\n\t\t\tdata,\n\t\t\t...options\n\t\t});\n\t}\n\n\tstatic async download(url, params, options = { responseType: 'blob' }) {\n\t\tlet errorData = null;\n\t\tconst res = await api({\n\t\t\turl,\n\t\t\tmethod: 'post',\n\t\t\tdata: params,\n\t\t\t...options\n\t\t}).catch((error) => {\n\t\t\terrorData = error;\n\t\t});\n\t\tif (errorData) {\n\t\t\treturn { code: 1, errorData };\n\t\t}\n\n\t\tif (!res.data) {\n\t\t\treturn { code: 1, data: null };\n\t\t}\n\t\tlet filename = options?.filename;\n\t\tif (!filename) {\n\t\t\tconst matcher = decodeURIComponent(res.headers['content-disposition'] || '')\n\t\t\t\t.match(/filename=([^;]+)/) || [];\n\t\t\tif (matcher[1]) {\n\t\t\t\t[filename] = matcher;\n\t\t\t}\n\t\t}\n\t\tconst extendType = res.data.type === 'application/json' ? 'json' : 'xls';\n\t\tif (extendType === 'json') {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = () => {\n\t\t\t\tlet msg = '报错';\n\t\t\t\ttry {\n\t\t\t\t\tmsg = JSON.parse(reader.result).msg;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t\tmessage.error(msg);\n\t\t\t};\n\t\t\treader.readAsText(res.data);\n\t\t\treturn false;\n\t\t}\n\t\tconst downloadUrl = window.URL.createObjectURL(new Blob([res.data], { type: res.data.type }));\n\t\tconst link = document.createElement('a');\n\t\tlink.href = downloadUrl;\n\t\tlink.setAttribute('download', filename || `导出文件.${extendType}`);\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\treturn { code: 0, data: res.data, _raw: res };\n\t}\n}\n\nexport default API;\n","import { atom } from 'recoil';\n\nconst userInfoState = atom({\n\tkey: 'userInfo',\n\tdefault: {\n\t\tusername: ''\n\t}\n});\nexport default userInfoState;\n","import { useHistory } from 'react-router-dom';\nimport {\n\tForm,\n\tInput,\n\tButton,\n\tmessage\n} from 'antd';\nimport { useSetRecoilState } from 'recoil';\nimport { userInfoState } from '../../recoil/atom';\nimport api from '../../assets/api/api';\nimport url from '../../assets/api/url';\nimport './index.scss';\n\nconst Login = () => {\n\tconst history = useHistory();\n\tconst setUserInfoState = useSetRecoilState(userInfoState);\n\tconst onFinish = async (value) => {\n\t\tconst { data, code, msg } = await api.post(url.login, {\n\t\t\tusername: value.username,\n\t\t\tpassword: value.password\n\t\t});\n\t\tmessage.success(msg);\n\t\tif (code) return;\n\t\twindow.localStorage.setItem('token', data.token);\n\t\tsetUserInfoState(data);\n\t\thistory.push('/main/module');\n\t};\n\treturn (\n\t\t<div className=\"login\">\n\t\t\t<div className=\"content\">\n\t\t\t\t<Form\n\t\t\t\t\tname=\"basic\"\n\t\t\t\t\tlabelCol={{ span: 8 }}\n\t\t\t\t\twrapperCol={{ span: 16 }}\n\t\t\t\t\tinitialValues={{ remember: true }}\n\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"用户名\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\trules={[{ required: true, message: '请输入用户名!' }]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"密码\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trules={[{ required: true, message: '请输入密码!' }]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t\t登录\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n"],"sourceRoot":""}